<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get Started with nfl4th • nfl4th</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get Started with nfl4th">
<meta property="og:description" content="nfl4th">
<meta property="og:image" content="https://www.nfl4th.com/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nfl4th</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.4.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/nfl4th.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/articles/4th-down-research.html">4th Down Research</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://twitter.com/ben_bot_baldwin" class="external-link">
    <span class="fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/nflverse/nfl4th/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Get Started with nfl4th</h1>
                        <h4 data-toc-skip class="author">Ben
Baldwin</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nflverse/nfl4th/blob/HEAD/vignettes/articles/nfl4th.Rmd" class="external-link"><code>vignettes/articles/nfl4th.Rmd</code></a></small>
      <div class="hidden name"><code>nfl4th.Rmd</code></div>

    </div>

    
    
<p>First load the packages and some data. <code><a href="../reference/load_4th_pbp.html">load_4th_pbp()</a></code>
loads <code>nflfastR</code> data and computes 4th down probabilities
(depending on your computer, this may take up to a minute or two per
season).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.nfl4th.com/">nfl4th</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com/" class="external-link">gt</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">nfl4th</span><span class="fu">::</span><span class="fu"><a href="../reference/load_4th_pbp.html">load_4th_pbp</a></span><span class="op">(</span><span class="fl">2020</span><span class="op">)</span></span>
<span><span class="co">#&gt; [19:58:51] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:14] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:15] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:24] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:29] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:30] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:39] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span></code></pre></div>
<div class="section level2">
<h2 id="easy-mode-using-nflfastr-data">Easy mode: using nflfastR data<a class="anchor" aria-label="anchor" href="#easy-mode-using-nflfastr-data"></a>
</h2>
<p>Here’s what the data obtained using <code><a href="../reference/load_4th_pbp.html">load_4th_pbp()</a></code> looks
like:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">go_boost</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">posteam</span>, <span class="va">ydstogo</span>, <span class="va">yardline_100</span>, <span class="va">posteam</span>, <span class="va">go_boost</span>, <span class="va">first_down_prob</span>, </span>
<span>    <span class="va">wp_fail</span>, <span class="va">wp_succeed</span>, <span class="va">go_wp</span>, <span class="va">fg_make_prob</span>, <span class="va">miss_fg_wp</span>, <span class="va">make_fg_wp</span>, </span>
<span>    <span class="va">fg_wp</span>, <span class="va">punt_wp</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="10%">
<col width="7%">
<col width="12%">
<col width="6%">
<col width="8%">
<col width="4%">
<col width="10%">
<col width="8%">
<col width="8%">
<col width="4%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">posteam</th>
<th align="right">ydstogo</th>
<th align="right">yardline_100</th>
<th align="right">go_boost</th>
<th align="right">first_down_prob</th>
<th align="right">wp_fail</th>
<th align="right">wp_succeed</th>
<th align="right">go_wp</th>
<th align="right">fg_make_prob</th>
<th align="right">miss_fg_wp</th>
<th align="right">make_fg_wp</th>
<th align="right">fg_wp</th>
<th align="right">punt_wp</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">SF</td>
<td align="right">3</td>
<td align="right">34</td>
<td align="right">2.27</td>
<td align="right">0.55</td>
<td align="right">0.67</td>
<td align="right">0.78</td>
<td align="right">0.73</td>
<td align="right">0.62</td>
<td align="right">0.67</td>
<td align="right">0.73</td>
<td align="right">0.71</td>
<td align="right">0.71</td>
</tr>
<tr class="even">
<td align="left">ARI</td>
<td align="right">10</td>
<td align="right">65</td>
<td align="right">-1.89</td>
<td align="right">0.27</td>
<td align="right">0.20</td>
<td align="right">0.31</td>
<td align="right">0.23</td>
<td align="right">0.00</td>
<td align="right">0.19</td>
<td align="right">0.29</td>
<td align="right">0.19</td>
<td align="right">0.25</td>
</tr>
<tr class="odd">
<td align="left">ARI</td>
<td align="right">7</td>
<td align="right">72</td>
<td align="right">-0.21</td>
<td align="right">0.38</td>
<td align="right">0.08</td>
<td align="right">0.14</td>
<td align="right">0.10</td>
<td align="right">0.00</td>
<td align="right">0.08</td>
<td align="right">0.15</td>
<td align="right">0.08</td>
<td align="right">0.11</td>
</tr>
<tr class="even">
<td align="left">SF</td>
<td align="right">5</td>
<td align="right">64</td>
<td align="right">0.39</td>
<td align="right">0.48</td>
<td align="right">0.84</td>
<td align="right">0.91</td>
<td align="right">0.88</td>
<td align="right">0.00</td>
<td align="right">0.83</td>
<td align="right">0.92</td>
<td align="right">0.83</td>
<td align="right">0.87</td>
</tr>
<tr class="odd">
<td align="left">SF</td>
<td align="right">3</td>
<td align="right">68</td>
<td align="right">0.60</td>
<td align="right">0.55</td>
<td align="right">0.64</td>
<td align="right">0.79</td>
<td align="right">0.72</td>
<td align="right">0.00</td>
<td align="right">0.62</td>
<td align="right">0.79</td>
<td align="right">0.62</td>
<td align="right">0.71</td>
</tr>
<tr class="even">
<td align="left">ARI</td>
<td align="right">9</td>
<td align="right">77</td>
<td align="right">-1.03</td>
<td align="right">0.30</td>
<td align="right">0.17</td>
<td align="right">0.29</td>
<td align="right">0.21</td>
<td align="right">0.00</td>
<td align="right">0.17</td>
<td align="right">0.28</td>
<td align="right">0.17</td>
<td align="right">0.22</td>
</tr>
<tr class="odd">
<td align="left">SF</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">3.35</td>
<td align="right">0.63</td>
<td align="right">0.77</td>
<td align="right">0.88</td>
<td align="right">0.84</td>
<td align="right">0.99</td>
<td align="right">0.75</td>
<td align="right">0.81</td>
<td align="right">0.80</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">ARI</td>
<td align="right">5</td>
<td align="right">34</td>
<td align="right">0.75</td>
<td align="right">0.45</td>
<td align="right">0.20</td>
<td align="right">0.37</td>
<td align="right">0.28</td>
<td align="right">0.62</td>
<td align="right">0.20</td>
<td align="right">0.31</td>
<td align="right">0.27</td>
<td align="right">0.23</td>
</tr>
<tr class="odd">
<td align="left">SF</td>
<td align="right">9</td>
<td align="right">36</td>
<td align="right">-0.40</td>
<td align="right">0.32</td>
<td align="right">0.72</td>
<td align="right">0.84</td>
<td align="right">0.76</td>
<td align="right">0.57</td>
<td align="right">0.72</td>
<td align="right">0.80</td>
<td align="right">0.76</td>
<td align="right">0.76</td>
</tr>
<tr class="even">
<td align="left">SF</td>
<td align="right">2</td>
<td align="right">6</td>
<td align="right">0.77</td>
<td align="right">0.54</td>
<td align="right">0.75</td>
<td align="right">0.87</td>
<td align="right">0.82</td>
<td align="right">0.98</td>
<td align="right">0.74</td>
<td align="right">0.81</td>
<td align="right">0.81</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>Or we can add some filters to look up a certain game:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">week</span> <span class="op">==</span> <span class="fl">20</span>, <span class="va">posteam</span> <span class="op">==</span> <span class="st">"GB"</span>, <span class="va">down</span> <span class="op">==</span> <span class="fl">4</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">posteam</span>, <span class="va">ydstogo</span>, <span class="va">yardline_100</span>, <span class="va">posteam</span>, <span class="va">go_boost</span>, <span class="va">first_down_prob</span>, </span>
<span>    <span class="va">wp_fail</span>, <span class="va">wp_succeed</span>, <span class="va">go_wp</span>, <span class="va">fg_make_prob</span>, <span class="va">miss_fg_wp</span>, <span class="va">make_fg_wp</span>, </span>
<span>    <span class="va">fg_wp</span>, <span class="va">punt_wp</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="10%">
<col width="7%">
<col width="12%">
<col width="6%">
<col width="8%">
<col width="4%">
<col width="10%">
<col width="8%">
<col width="8%">
<col width="4%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">posteam</th>
<th align="right">ydstogo</th>
<th align="right">yardline_100</th>
<th align="right">go_boost</th>
<th align="right">first_down_prob</th>
<th align="right">wp_fail</th>
<th align="right">wp_succeed</th>
<th align="right">go_wp</th>
<th align="right">fg_make_prob</th>
<th align="right">miss_fg_wp</th>
<th align="right">make_fg_wp</th>
<th align="right">fg_wp</th>
<th align="right">punt_wp</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">GB</td>
<td align="right">17</td>
<td align="right">65</td>
<td align="right">-3.27</td>
<td align="right">0.15</td>
<td align="right">0.32</td>
<td align="right">0.47</td>
<td align="right">0.34</td>
<td align="right">0.00</td>
<td align="right">0.30</td>
<td align="right">0.46</td>
<td align="right">0.30</td>
<td align="right">0.37</td>
</tr>
<tr class="even">
<td align="left">GB</td>
<td align="right">6</td>
<td align="right">6</td>
<td align="right">-1.69</td>
<td align="right">0.31</td>
<td align="right">0.35</td>
<td align="right">0.57</td>
<td align="right">0.42</td>
<td align="right">0.98</td>
<td align="right">0.33</td>
<td align="right">0.44</td>
<td align="right">0.44</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">GB</td>
<td align="right">15</td>
<td align="right">86</td>
<td align="right">-1.42</td>
<td align="right">0.19</td>
<td align="right">0.16</td>
<td align="right">0.38</td>
<td align="right">0.21</td>
<td align="right">0.00</td>
<td align="right">0.16</td>
<td align="right">0.33</td>
<td align="right">0.16</td>
<td align="right">0.22</td>
</tr>
<tr class="even">
<td align="left">GB</td>
<td align="right">10</td>
<td align="right">76</td>
<td align="right">0.83</td>
<td align="right">0.32</td>
<td align="right">0.15</td>
<td align="right">0.37</td>
<td align="right">0.22</td>
<td align="right">0.00</td>
<td align="right">0.14</td>
<td align="right">0.31</td>
<td align="right">0.14</td>
<td align="right">0.21</td>
</tr>
<tr class="odd">
<td align="left">GB</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">3.69</td>
<td align="right">0.33</td>
<td align="right">0.04</td>
<td align="right">0.34</td>
<td align="right">0.14</td>
<td align="right">0.98</td>
<td align="right">0.03</td>
<td align="right">0.10</td>
<td align="right">0.10</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>We see the infamous field goal at the bottom.</p>
</div>
<div class="section level2">
<h2 id="calculations-from-user-input">Calculations from user input<a class="anchor" aria-label="anchor" href="#calculations-from-user-input"></a>
</h2>
<p>The below shows the bare minimum amount of information that has to be
fed to <code>nfl4th</code> in order to compute 4th down decision
recommendations. The main function on user-input data is
<code><a href="../reference/add_4th_probs.html">add_4th_probs()</a></code>.</p>
<p>The reason teams from a specific game have to be used is that the
model depends on factors such as point spread, team totals, and
indoor/outdoor and the program automatically looks these up so that
users don’t have to provide them.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">one_play</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  </span>
<span>  <span class="co"># things to help find the right game (use "reg" or "post" for type)</span></span>
<span>  home_team <span class="op">=</span> <span class="st">"GB"</span>,</span>
<span>  away_team <span class="op">=</span> <span class="st">"TB"</span>,</span>
<span>  posteam <span class="op">=</span> <span class="st">"GB"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"post"</span>,</span>
<span>  season <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>  </span>
<span>  <span class="co"># information about the situation</span></span>
<span>  qtr <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  quarter_seconds_remaining <span class="op">=</span> <span class="fl">129</span>,</span>
<span>  ydstogo <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  yardline_100 <span class="op">=</span> <span class="fl">8</span>,</span>
<span>  score_differential <span class="op">=</span> <span class="op">-</span><span class="fl">8</span>,</span>
<span></span>
<span>  home_opening_kickoff <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  posteam_timeouts_remaining <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  defteam_timeouts_remaining <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">one_play</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">nfl4th</span><span class="fu">::</span><span class="fu"><a href="../reference/add_4th_probs.html">add_4th_probs</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">posteam</span>, <span class="va">ydstogo</span>, <span class="va">yardline_100</span>, <span class="va">posteam</span>, <span class="va">go_boost</span>, <span class="va">first_down_prob</span>, </span>
<span>    <span class="va">wp_fail</span>, <span class="va">wp_succeed</span>, <span class="va">go_wp</span>, <span class="va">fg_make_prob</span>, <span class="va">miss_fg_wp</span>, <span class="va">make_fg_wp</span>, </span>
<span>    <span class="va">fg_wp</span>, <span class="va">punt_wp</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Computing probabilities for 1 plays. . .</span></span>
<span><span class="co">#&gt; [19:59:46] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:47] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:47] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:48] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:48] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:48] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="6%">
<col width="6%">
<col width="10%">
<col width="7%">
<col width="12%">
<col width="6%">
<col width="8%">
<col width="4%">
<col width="10%">
<col width="8%">
<col width="8%">
<col width="4%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">posteam</th>
<th align="right">ydstogo</th>
<th align="right">yardline_100</th>
<th align="right">go_boost</th>
<th align="right">first_down_prob</th>
<th align="right">wp_fail</th>
<th align="right">wp_succeed</th>
<th align="right">go_wp</th>
<th align="right">fg_make_prob</th>
<th align="right">miss_fg_wp</th>
<th align="right">make_fg_wp</th>
<th align="right">fg_wp</th>
<th align="right">punt_wp</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">GB</td>
<td align="right">8</td>
<td align="right">8</td>
<td align="right">3.69</td>
<td align="right">0.33</td>
<td align="right">0.04</td>
<td align="right">0.34</td>
<td align="right">0.14</td>
<td align="right">0.98</td>
<td align="right">0.03</td>
<td align="right">0.1</td>
<td align="right">0.1</td>
<td align="right">NA</td>
</tr></tbody>
</table>
<p>Comparing this and the table above, we see the exact same numbers as
expected.</p>
</div>
<div class="section level2">
<h2 id="make-a-summary-table">Make a summary table<a class="anchor" aria-label="anchor" href="#make-a-summary-table"></a>
</h2>
<p>Let’s put the play above into a table using the provided function
<code><a href="../reference/make_table_data.html">make_table_data()</a></code>, which makes it easier to interpret the
recommendations for a play. This function only works with one play at a
time since it makes a table using the results from the play.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">one_play</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">nfl4th</span><span class="fu">::</span><span class="fu"><a href="../reference/add_4th_probs.html">add_4th_probs</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">nfl4th</span><span class="fu">::</span><span class="fu"><a href="../reference/make_table_data.html">make_table_data</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Computing probabilities for 1 plays. . .</span></span>
<span><span class="co">#&gt; [19:59:49] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:50] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:50] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:50] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:50] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:51] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">choice</th>
<th align="right">choice_prob</th>
<th align="right">success_prob</th>
<th align="right">fail_wp</th>
<th align="right">success_wp</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Go for it</td>
<td align="right">13.7</td>
<td align="right">32.7</td>
<td align="right">3.6</td>
<td align="right">34.5</td>
</tr>
<tr class="even">
<td align="left">Field goal attempt</td>
<td align="right">10.0</td>
<td align="right">97.5</td>
<td align="right">3.1</td>
<td align="right">10.2</td>
</tr>
<tr class="odd">
<td align="left">Punt</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>Looking at the table, the Packers would be expected to have 12.7% win
probability if they had gone for it and 8.9% if they kicked a field
goal. This difference of 3.8 percentage points is <a href="https://twitter.com/benbbaldwin/status/1354239287299088384" class="external-link">almost
exactly the same as PFF’s 3.5 percentage points</a> for the
decision.</p>
</div>
<div class="section level2">
<h2 id="make-a-summary-table-for-a-2-point-decision">Make a summary table for a 2-point decision<a class="anchor" aria-label="anchor" href="#make-a-summary-table-for-a-2-point-decision"></a>
</h2>
<p><code>nfl4th</code> also contains a function to calculate 2-point
decisions. Let’s put in the situation that would have happened if the
Packers had scored a touchdown on the 4th &amp; 8. We don’t need a
calculator to know that they should have gone for two, but let’s
practice by putting in the numbers, assuming that the 4th down play took
6 seconds while resulting in a touchdown.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">another_play</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  </span>
<span>  <span class="co"># things to help find the right game (use "reg" or "post")</span></span>
<span>  home_team <span class="op">=</span> <span class="st">"GB"</span>,</span>
<span>  away_team <span class="op">=</span> <span class="st">"TB"</span>,</span>
<span>  posteam <span class="op">=</span> <span class="st">"GB"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"post"</span>,</span>
<span>  season <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>  </span>
<span>  <span class="co"># information about the situation</span></span>
<span>  qtr <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  quarter_seconds_remaining <span class="op">=</span> <span class="fl">123</span>,</span>
<span>  score_differential <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>,</span>
<span></span>
<span>  home_opening_kickoff <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  posteam_timeouts_remaining <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  defteam_timeouts_remaining <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">another_play</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">nfl4th</span><span class="fu">::</span><span class="fu"><a href="../reference/add_2pt_probs.html">add_2pt_probs</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">nfl4th</span><span class="fu">::</span><span class="fu"><a href="../reference/make_2pt_table_data.html">make_2pt_table_data</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Computing probabilities for  1 plays. . .</span></span>
<span><span class="co">#&gt; [19:59:51] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">choice</th>
<th align="right">choice_prob</th>
<th align="right">success_prob</th>
<th align="right">fail_wp</th>
<th align="right">success_wp</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Go for 2</td>
<td align="right">34.5</td>
<td align="right">58.9</td>
<td align="right">21.2</td>
<td align="right">43.7</td>
</tr>
<tr class="even">
<td align="left">Kick XP</td>
<td align="right">26.8</td>
<td align="right">93.3</td>
<td align="right">21.2</td>
<td align="right">27.2</td>
</tr>
</tbody>
</table>
<p>Note that the go for 2 probability here is identical to the win
probability associated with a successful 4th down conversion above
because the 4th down model assumes that the Packers would go for 2 if
they scored.</p>
</div>
<div class="section level2">
<h2 id="getting-4th-down-plays-from-a-live-game">Getting 4th down plays from a live game<a class="anchor" aria-label="anchor" href="#getting-4th-down-plays-from-a-live-game"></a>
</h2>
<p><code>nflfastR</code> isn’t available for live games and typing all
the plays in by hand is annoying. So how does the 4th down bot work?
With thanks to the ESPN API, which can be accessed using
<code><a href="../reference/get_4th_plays.html">get_4th_plays()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plays</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_4th_plays.html">get_4th_plays</a></span><span class="op">(</span><span class="st">"2020_20_TB_GB"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plays</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">desc</span>, <span class="va">quarter_seconds_remaining</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 2</span></span></span>
<span><span class="co">#&gt;   desc                             quarter_seconds_remaining</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> <span style="color: #949494;">"</span>Mason Crosby 26 Yd Field Goal <span style="color: #949494;">"</span>                       125</span></span>
<span></span>
<span><span class="va">plays</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">nfl4th</span><span class="fu">::</span><span class="fu"><a href="../reference/add_4th_probs.html">add_4th_probs</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">nfl4th</span><span class="fu">::</span><span class="fu"><a href="../reference/make_table_data.html">make_table_data</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; Computing probabilities for 1 plays. . .</span></span>
<span><span class="co">#&gt; [19:59:53] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:54] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:54] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:55] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:55] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [19:59:55] WARNING: src/learner.cc:553: </span></span>
<span><span class="co">#&gt;   If you are loading a serialized model (like pickle in Python, RDS in R) generated by</span></span>
<span><span class="co">#&gt;   older XGBoost, please export the model by calling `Booster.save_model` from that version</span></span>
<span><span class="co">#&gt;   first, then load it back in current version. See:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     https://xgboost.readthedocs.io/en/latest/tutorials/saving_model.html</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   for more details about differences between saving model and serializing.</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">choice</th>
<th align="right">choice_prob</th>
<th align="right">success_prob</th>
<th align="right">fail_wp</th>
<th align="right">success_wp</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Go for it</td>
<td align="right">13.5</td>
<td align="right">32.7</td>
<td align="right">3.4</td>
<td align="right">34.2</td>
</tr>
<tr class="even">
<td align="left">Field goal attempt</td>
<td align="right">9.5</td>
<td align="right">97.5</td>
<td align="right">3.0</td>
<td align="right">9.7</td>
</tr>
<tr class="odd">
<td align="left">Punt</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>Note that the probabilities are slightly different here because ESPN
has the wrong value for time remaining (125 seconds instead of 129).
This doesn’t affect a lot of plays but is something to be aware of.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://twitter.com/benbbaldwin" class="external-link">Ben Baldwin</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
